
    @if(order){<div class="py-20 flex items-center justify-center">
<div class=" max-w-3xl mx-auto p-4 bg-white rounded-xl my-16 shadow-md border border-gray-400">
    <header class="flex items-start justify-between mb-6">
        <div>
            <h1 class="text-2xl font-semibold">Order Receipt</h1>
            <p class="text-sm text-gray-500 mt-1">Order ID: <span class="font-medium">{{ order._id || '—'
                    }}</span></p>
        </div>
        <div class="text-right">
            <p class="text-sm text-gray-600">Created:</p>
            <p class="font-medium">{{ order.createdAt ? (order.createdAt | date:'medium') : '—' }}</p>
        </div>
    </header>

    <!-- Products table -->
    <section class="mb-6">
        <h2 class="text-lg font-medium mb-3">Products</h2>

        <div class="w-full overflow-x-auto border rounded-lg">
            <table class="min-w-full divide-y">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-4 py-3 text-left text-sm font-medium text-gray-600">Product</th>
                        <th class="px-4 py-3 text-left text-sm font-medium text-gray-600">Price</th>
                        <th class="px-4 py-3 text-center text-sm font-medium text-gray-600">Quantity</th>
                        <th class="px-4 py-3 text-right text-sm font-medium text-gray-600">Line Total</th>
                    </tr>
                </thead>

                <tbody class="bg-white divide-y">
                    @for (item of order.items; track $index) {
                        <tr >
                        <td class="px-4 py-3">
                            <div class="text-sm font-medium text-gray-800">
                                {{ item?.product?.name || 'Unnamed product' }}
                            </div>
                        </td>

                        <td class="px-4 py-3">
                            <div class="text-sm text-gray-800">
                                {{ item?.priceAtOrder}}
                            </div>
                        </td>

                        <td class="px-4 py-3 text-center">
                            <div class="text-sm text-gray-800">{{ item?.quantity ?? 0 }}</div>
                        </td>

                        <td class="px-4 py-3 text-right">
                            <div class="text-sm font-medium text-gray-800">
                                {{
                                ( (item?.priceAtOrder  ?? 0) * (item?.quantity ?? 0) )
                                | number:'1.2-2'
                                }}
                            </div>
                        </td>
                    </tr>
                    }
                    

                    <!-- show friendly empty state -->
                     @if (!order.items || order.items.length === 0) {
                        <tr >
                        <td colspan="4" class="px-4 py-6 text-center text-gray-500">No products in this order.</td>
                    </tr>
                     }
                    
                </tbody>
            </table>
        </div>
    </section>

    <!-- Summary & Shipping -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div class="bg-gray-50 p-4 rounded-lg">
            <h3 class="font-medium mb-2">Shipping Address</h3>
            <p class="text-sm text-gray-800"><span class="font-medium">Name:</span> {{ order.shippingAddress.fullName
                || '—' }}</p>
            <p class="text-sm text-gray-800"><span class="font-medium">Address:</span> {{
                order.shippingAddress.addressLine1 || '—' }}</p>
            <p class="text-sm text-gray-800"><span class="font-medium">City:</span> {{ order.shippingAddress.city ||
                '—' }}</p>
        </div>

        <div class="bg-gray-50 p-4 rounded-lg">
            <h3 class="font-medium mb-2">Payment & Order</h3>
            <p class="text-sm text-gray-800"><span class="font-medium">Payment Method:</span> {{ order.paymentMethod ||
                '—' }}</p>
            <p class="text-sm text-gray-800"><span class="font-medium">Payment Status:</span> {{ order.paymentStatus ||
                '—' }}</p>
            <p class="text-sm text-gray-800"><span class="font-medium">Order Status:</span> {{ order.orderStatus || '—'
                }}</p>
        </div>
    </section>

    <!-- Totals -->
    <section class="w-full mb-6">
  <table class="w-full text-sm text-right border-separate border-spacing-y-2">
    <tbody>
      <tr class="text-gray-600">
        <td class="w-1/2 text-right pr-6">Subtotal:</td>
        <td class="w-1/4 font-medium text-gray-800">
          {{ order.subtotal | number:'1.2-2' }}
        </td>
      </tr>
      <tr class="text-gray-600">
        <td class="text-right pr-6">Tax:</td>
        <td class="font-medium text-gray-800">
          {{ order.tax | number:'1.2-2' }}
        </td>
      </tr>
      <tr class="text-gray-600">
        <td class="text-right pr-6">Delivery Fee:</td>
        <td class="font-medium text-gray-800">
          {{ order.deliveryFee | number:'1.2-2' }}
        </td>
      </tr>
      <tr class="border-t border-gray-200">
        <td class="text-right pr-6 pt-3 text-lg font-medium text-gray-700">
          Total:
        </td>
        <td class="pt-3 text-lg font-semibold text-gray-900">
          {{ order.total | number:'1.2-2' }}
        </td>
      </tr>
    </tbody>
  </table>
</section>

</div>
</div>}@else {
    <app-not-found/>
}

